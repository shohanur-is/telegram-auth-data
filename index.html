<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Telegram Network Data Capture</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; }
    #status { padding: 10px; margin: 10px 0; border-radius: 4px; background: #f0f8ff; }
    pre { background: #f5f5f5; padding: 15px; border-radius: 4px; overflow-x: auto; }
    .network-data { margin-top: 20px; }
    .request { border-left: 3px solid #0088cc; padding-left: 10px; }
    .response { border-left: 3px solid #4CAF50; padding-left: 10px; margin-top: 10px; }
  </style>
</head>
<body>
  <h2>Telegram Network Data Capture</h2>
  <div id="status">Initializing Telegram authentication...</div>
  <div id="widget-container"></div>
  
  <div class="network-data">
    <h3>Network Request Data:</h3>
    <div class="request">
      <h4>Request to Telegram:</h4>
      <pre id="request-data">Waiting for request...</pre>
    </div>
    <div class="response">
      <h4>Response from Telegram:</h4>
      <pre id="response-data">Waiting for response...</pre>
    </div>
  </div>

  <script>
    // Configuration
    const CONFIG = {
      botName: 'ScoringLiveBot',
      origin: 'https://shohanur-is.github.io'
    };

    // DOM Elements
    const statusEl = document.getElementById('status');
    const requestEl = document.getElementById('request-data');
    const responseEl = document.getElementById('response-data');
    const widgetContainer = document.getElementById('widget-container');

    // Monkey-patch fetch to intercept requests
    const originalFetch = window.fetch;
    window.fetch = async function(...args) {
      const [url, options] = args;
      
      // Capture Telegram auth request
      if (url.includes('oauth.telegram.org/auth')) {
        requestEl.textContent = `URL: ${url}\n\nOptions: ${JSON.stringify(options || {}, null, 2)}`;
        
        try {
          const response = await originalFetch.apply(this, args);
          const clone = response.clone(); // Clone to read twice
          
          // Capture response data
          const data = await clone.json();
          responseEl.textContent = JSON.stringify(data, null, 2);
          
          return response;
        } catch (error) {
          responseEl.textContent = `Error: ${error.message}`;
          throw error;
        }
      }
      
      return originalFetch.apply(this, args);
    };

    // Initialize Telegram Widget
    function initTelegramWidget() {
      const script = document.createElement('script');
      script.async = true;
      script.src = 'https://telegram.org/js/telegram-widget.js?22';
      script.dataset.telegramLogin = CONFIG.botName;
      script.dataset.size = 'large';
      script.dataset.origin = CONFIG.origin;
      script.dataset.onauth = 'onTelegramAuth';
      
      script.onload = () => {
        statusEl.textContent = 'Telegram widget loaded. Click to authenticate...';
      };
      
      script.onerror = () => {
        statusEl.textContent = 'Failed to load Telegram widget';
      };
      
      widgetContainer.appendChild(script);
    }

    // Telegram Auth Callback (optional)
    function onTelegramAuth(user) {
      console.log('Auth data:', user);
    }
    window.onTelegramAuth = onTelegramAuth;

    // Initialize
    initTelegramWidget();
  </script>
</body>
</html><!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Telegram Network Data Capture</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; }
    #status { padding: 10px; margin: 10px 0; border-radius: 4px; background: #f0f8ff; }
    pre { background: #f5f5f5; padding: 15px; border-radius: 4px; overflow-x: auto; }
    .network-data { margin-top: 20px; }
    .request { border-left: 3px solid #0088cc; padding-left: 10px; }
    .response { border-left: 3px solid #4CAF50; padding-left: 10px; margin-top: 10px; }
  </style>
</head>
<body>
  <h2>Telegram Network Data Capture</h2>
  <div id="status">Initializing Telegram authentication...</div>
  <div id="widget-container"></div>
  
  <div class="network-data">
    <h3>Network Request Data:</h3>
    <div class="request">
      <h4>Request to Telegram:</h4>
      <pre id="request-data">Waiting for request...</pre>
    </div>
    <div class="response">
      <h4>Response from Telegram:</h4>
      <pre id="response-data">Waiting for response...</pre>
    </div>
  </div>

  <script>
    // Configuration
    const CONFIG = {
      botName: 'ScoringLiveBot',
      origin: 'https://shohanur-is.github.io'
    };

    // DOM Elements
    const statusEl = document.getElementById('status');
    const requestEl = document.getElementById('request-data');
    const responseEl = document.getElementById('response-data');
    const widgetContainer = document.getElementById('widget-container');

    // Monkey-patch fetch to intercept requests
    const originalFetch = window.fetch;
    window.fetch = async function(...args) {
      const [url, options] = args;
      
      // Capture Telegram auth request
      if (url.includes('oauth.telegram.org/auth')) {
        requestEl.textContent = `URL: ${url}\n\nOptions: ${JSON.stringify(options || {}, null, 2)}`;
        
        try {
          const response = await originalFetch.apply(this, args);
          const clone = response.clone(); // Clone to read twice
          
          // Capture response data
          const data = await clone.json();
          responseEl.textContent = JSON.stringify(data, null, 2);
          
          return response;
        } catch (error) {
          responseEl.textContent = `Error: ${error.message}`;
          throw error;
        }
      }
      
      return originalFetch.apply(this, args);
    };

    // Initialize Telegram Widget
    function initTelegramWidget() {
      const script = document.createElement('script');
      script.async = true;
      script.src = 'https://telegram.org/js/telegram-widget.js?22';
      script.dataset.telegramLogin = CONFIG.botName;
      script.dataset.size = 'large';
      script.dataset.origin = CONFIG.origin;
      script.dataset.onauth = 'onTelegramAuth';
      
      script.onload = () => {
        statusEl.textContent = 'Telegram widget loaded. Click to authenticate...';
      };
      
      script.onerror = () => {
        statusEl.textContent = 'Failed to load Telegram widget';
      };
      
      widgetContainer.appendChild(script);
    }

    // Telegram Auth Callback (optional)
    function onTelegramAuth(user) {
      console.log('Auth data:', user);
    }
    window.onTelegramAuth = onTelegramAuth;

    // Initialize
    initTelegramWidget();
  </script>
</body>
</html>
